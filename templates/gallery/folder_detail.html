{% extends 'base.html' %}
{% block content %}
<div class="breadcrumb">
    <a href="{% url 'folder_list' %}">–ì–æ–ª–æ–≤–Ω–∞</a>
</div>

<h2>–ü–∞–ø–∫–∞: {{ folder.name }}</h2>

{% if share_record %}
  <p>–ó –≤–∞–º–∏ –ø–æ–¥—ñ–ª–∏–ª–∏—Å—è: {{ share_record.shared_by.username }} ({{ share_record.permission|title }})</p>
{% endif %}

<h3>–ü—ñ–¥–ø–∞–ø–∫–∏</h3>
<div>
    {% for sub in subfolders %}
    <div class="folder">
        <div class="folder-icon">üìÅ</div>
        <div><a href="{% url 'folder_detail' sub.id %}">{{ sub.name }}</a></div>
        <div>
            {% if sub.user == request.user %}
                <form method="post" action="{% url 'delete_folder' sub.id %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn">–í–∏–¥–∞–ª–∏—Ç–∏</button>
                </form>
                <a href="{% url 'share_folder' sub.id %}" class="btn">–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è</a>
            {% endif %}
        </div>
    </div>
    {% empty %}
    <p>–ü—ñ–¥–ø–∞–ø–∫–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ.</p>
    {% endfor %}
</div>

<h3>–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è</h3>
<div>
    {% for image in images %}
    <div class="image">
        <img src="{{ image.image_url }}" alt="Image">
        <div>
            {% if image.user == request.user %}
                <form method="post" action="{% url 'delete_image' image.id %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn">–í–∏–¥–∞–ª–∏—Ç–∏</button>
                </form>
                <a href="{% url 'share_image' image.id %}" class="btn">–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è</a>
            {% endif %}
        </div>
    </div>
    {% empty %}
    <p>–ó–æ–±—Ä–∞–∂–µ–Ω—å –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ.</p>
    {% endfor %}
</div>

{% if can_add %}
  <h3>–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—ñ–¥–ø–∞–ø–∫—É</h3>
  <form method="post">
      {% csrf_token %}
      {{ folder_form.as_p }}
      <button type="submit" name="create_folder" class="btn">–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—ñ–¥–ø–∞–ø–∫—É</button>
  </form>

  <h3>–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</h3>
  <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      {{ image_form.as_p }}
      <button type="submit" name="upload_image" class="btn">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</button>
  </form>
{% endif %}

<div>
    <p><a href="{% url 'folder_list' %}" class="btn">–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—å –¥–æ –≥–æ–ª–æ–≤–Ω–æ—ó</a></p>
</div>
{% endblock %}
