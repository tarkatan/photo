{% extends 'base.html' %}
{% block content %}
<h2>–°–ø—ñ–ª—å–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏</h2>

<div>
    <h3>–°–ø—ñ–ª—å–Ω—ñ –ø–∞–ø–∫–∏</h3>
    {% if shared_folders %}
      <div>
        {% for folder in shared_folders %}
          <div class="folder">
             <div class="folder-icon">üìÅ</div>
             <div>
               <a href="{% url 'folder_detail' folder.id %}">{{ folder.name }}</a>
             </div>
             <p>–ó –≤–∞–º–∏ –ø–æ–¥—ñ–ª–∏–ª–∏—Å—è: 
               {% for share in folder.shares.all %}
                  {{ share.shared_by.username }}{% if not forloop.last %}, {% endif %}
               {% empty %}
                  –Ω–µ–≤—ñ–¥–æ–º–æ
               {% endfor %}
             </p>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p>–°–ø—ñ–ª—å–Ω–∏—Ö –ø–∞–ø–æ–∫ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</p>
    {% endif %}
</div>

<div>
    <h3>–°–ø—ñ–ª—å–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</h3>
    {% if shared_images %}
      <div>
        {% for image in shared_images %}
          <div class="image">
             <img src="{{ image.image_url }}" alt="Image">
             <p>–ó –≤–∞–º–∏ –ø–æ–¥—ñ–ª–∏–ª–∏—Å—è: 
               {% for share in image.shares.all %}
                  {{ share.shared_by.username }}{% if not forloop.last %}, {% endif %}
               {% empty %}
                  –Ω–µ–≤—ñ–¥–æ–º–æ
               {% endfor %}
             </p>
             {% if image.folder and image.folder.shares.filter(user=request.user, permission="view").exists %}
               <a href="{% url 'folder_detail' image.folder.id %}" class="btn">–í—ñ–¥–∫—Ä–∏—Ç–∏</a>
             {% endif %}
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p>–°–ø—ñ–ª—å–Ω–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</p>
    {% endif %}
</div>

<p><a href="{% url 'folder_list' %}" class="btn">–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—å –¥–æ –≥–æ–ª–æ–≤–Ω–æ—ó</a></p>
{% endblock %}

